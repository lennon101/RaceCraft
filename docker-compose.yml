version: '3.8'

services:
  fuel-planner:
    image: lennon101/racecraft:latest
    container_name: racecraft
    ports:
      - "5000:5000"
    volumes:
      - racecraft-data:/app/data
    environment:
      - FLASK_ENV=production
      # Supabase Configuration (optional - if not set, app runs in legacy mode)
      # - SUPABASE_URL=https://your-project.supabase.co
      # - SUPABASE_ANON_KEY=your_anon_key_here
      # - SUPABASE_SERVICE_KEY=your_service_key_here
    command: ["gunicorn", "--bind", "0.0.0.0:5000", "--workers", "4", "app:app"]
    restart: unless-stopped
    networks:
      - racecraft

volumes:
  racecraft-data:

networks:
  racecraft:
